-- ============================================================================
-- STECCOM_EXPENSES - Таблица расходов STECCOM
-- Назначение: Хранение биллинг данных Iridium M2M из инвойсов STECCOM
-- База данных: Oracle (production)
-- ============================================================================

CREATE TABLE STECCOM_EXPENSES (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    INVOICE_DATE DATE,
    COMPANY_NAME VARCHAR2(200),
    COMPANY_NUMBER NUMBER,
    SETTLING_PERIOD NUMBER,
    FEE_TYPE VARCHAR2(100),
    CONTRACT_ID VARCHAR2(50),
    IMSI_ISDNA VARCHAR2(50),
    ICC_ID_IMEI VARCHAR2(50),
    ACTIVATION_DATE DATE,
    TRANSACTION_DATE DATE,
    SERVICE VARCHAR2(100),
    RATE_TYPE VARCHAR2(100),
    PLAN_DISCOUNT VARCHAR2(100),
    DESCRIPTION VARCHAR2(500),
    PRORATED_DAYS NUMBER,
    AMOUNT NUMBER(10,2),
    GROUP_NAME VARCHAR2(100),
    SOURCE_FILE VARCHAR2(200),
    LOAD_DATE DATE DEFAULT SYSDATE,
    CREATED_BY VARCHAR2(50) DEFAULT USER
);

-- Индексы для оптимизации запросов
CREATE INDEX IDX_STECCOM_IMEI ON STECCOM_EXPENSES(ICC_ID_IMEI);
CREATE INDEX IDX_STECCOM_CONTRACT ON STECCOM_EXPENSES(CONTRACT_ID);
CREATE INDEX IDX_STECCOM_INVOICE_DATE ON STECCOM_EXPENSES(INVOICE_DATE);
CREATE INDEX IDX_STECCOM_SERVICE ON STECCOM_EXPENSES(SERVICE);
CREATE INDEX IDX_STECCOM_DESCRIPTION ON STECCOM_EXPENSES(DESCRIPTION);

-- Комментарии
COMMENT ON TABLE STECCOM_EXPENSES IS 'Таблица расходов STECCOM - биллинг данные Iridium M2M';
COMMENT ON COLUMN STECCOM_EXPENSES.ID IS 'Первичный ключ (auto-increment)';
COMMENT ON COLUMN STECCOM_EXPENSES.CONTRACT_ID IS 'ID контракта - связь с биллингом (SERVICES.LOGIN)';
COMMENT ON COLUMN STECCOM_EXPENSES.ICC_ID_IMEI IS 'IMEI номер устройства';
COMMENT ON COLUMN STECCOM_EXPENSES.INVOICE_DATE IS 'Дата инвойса';
COMMENT ON COLUMN STECCOM_EXPENSES.ACTIVATION_DATE IS 'Дата активации сервиса';
COMMENT ON COLUMN STECCOM_EXPENSES.AMOUNT IS 'Сумма расходов (USD)';
COMMENT ON COLUMN STECCOM_EXPENSES.DESCRIPTION IS 'Описание расхода (Activation Fee, Advance Charge, Prorated, Credit и т.д.)';
COMMENT ON COLUMN STECCOM_EXPENSES.SOURCE_FILE IS 'Имя загруженного CSV файла';
COMMENT ON COLUMN STECCOM_EXPENSES.LOAD_DATE IS 'Дата и время загрузки записи';

PROMPT Таблица STECCOM_EXPENSES создана успешно!


