{
  "table_name": "BM_TARIFFEL_TYPE",
  "schema": "billing",
  "description": "Справочник типов тарифных элементов. Определяет типы статей тарификации (абонентская плата, плата за трафик, счетчики, ступенчатая тарификация и т.д.). Используется в BM_TARIFFEL для определения типа тарификации.",
  "database": "Oracle (production)",
  "key_columns": {
    "TARIFFEL_TYPE_ID": "Уникальный идентификатор типа тарифного элемента (PRIMARY KEY)",
    "TYPE_ID": "Тип услуги из BM_TYPE (например, 1, 2, 3, 10, 11, 12, 13 для разных типов услуг)",
    "RESOURCE_TYPE_ID": "Тип ресурса из BM_RESOURCE_TYPE. Связь с BM_RESOURCE_TYPE.RESOURCE_TYPE_ID",
    "MNEMONIC": "Мнемонический код типа (например, 'fee', 'traffic_pay', 'counter_cf', 'steps', 'abon_payment', 'overage')",
    "NAME": "Название типа тарифного элемента (например, 'Абонентская плата', 'Плата за трафик', 'Коэффициент счетчика')",
    "ENTITY_TYPE": "Тип сущности: 'unique' (уникальный элемент) или 'multi' (может быть несколько элементов)",
    "MEASURE_ID": "ID единицы измерения",
    "CHECK_SCHEDULED": "Флаг проверки расписания"
  },
  "business_rules": [
    "MNEMONIC определяет тип статьи тарификации:",
    "  - 'fee' - абонентская плата (ежемесячная фиксированная плата)",
    "  - 'traffic_pay' / 'll_traffic_pay' - плата за трафик (переменная плата за объем трафика)",
    "  - 'counter_cf' - коэффициент счетчика (скидка при достижении порога счетчика)",
    "  - 'counter_cf_fee' - плата за счетчик (дополнительная плата за использование счетчика)",
    "  - 'steps' - ступенчатая тарификация (разные цены в зависимости от объема)",
    "  - 'abon_payment' - абонентская плата (альтернативное название)",
    "  - 'overage' - превышение трафика",
    "ENTITY_TYPE = 'unique' означает, что в тарифе может быть только один элемент этого типа",
    "ENTITY_TYPE = 'multi' означает, что в тарифе может быть несколько элементов этого типа (например, разные зоны)",
    "TYPE_ID связывает тип тарифного элемента с типом услуги (BM_TYPE)",
    "RESOURCE_TYPE_ID используется для расшифровки для бухгалтерии"
  ],
  "relationships": [
    {
      "table": "BM_TARIFFEL",
      "type": "JOIN",
      "on": "BM_TARIFFEL_TYPE.TARIFFEL_TYPE_ID = BM_TARIFFEL.TARIFFEL_TYPE_ID"
    },
    {
      "table": "BM_TYPE",
      "type": "LEFT JOIN",
      "on": "BM_TARIFFEL_TYPE.TYPE_ID = BM_TYPE.TYPE_ID"
    },
    {
      "table": "BM_RESOURCE_TYPE",
      "type": "LEFT JOIN",
      "on": "BM_TARIFFEL_TYPE.RESOURCE_TYPE_ID = BM_RESOURCE_TYPE.RESOURCE_TYPE_ID"
    }
  ],
  "usage_notes": [
    "Используется для определения типа статьи тарификации в BM_TARIFFEL",
    "MNEMONIC помогает понять, что представляет собой тарифный элемент:",
    "  - Если MNEMONIC = 'fee' → это абонентская плата (фиксированная ежемесячная)",
    "  - Если MNEMONIC = 'traffic_pay' или 'll_traffic_pay' → это плата за трафик (переменная)",
    "  - Если MNEMONIC = 'counter_cf' → это коэффициент скидки при достижении порога счетчика",
    "  - Если MNEMONIC = 'steps' → это ступенчатая тарификация с разными ценами по ступеням",
    "Для расчета доходов нужно суммировать MONEY всех тарифных элементов тарифа",
    "Абонентская плата (fee) обычно имеет фиксированное значение MONEY",
    "Плата за трафик (traffic_pay) обычно имеет MONEY за единицу трафика и использует STEP1-STEP4 для ступеней"
  ],
  "examples": [
    {
      "description": "Типы тарифных элементов для Iridium SBD (TYPE_ID=10 или 92)",
      "mnemonics": [
        "fee - абонентская плата (фиксированная ежемесячная)",
        "ll_traffic_pay - плата за трафик (переменная)",
        "counter_cf - коэффициент счетчика (скидка при достижении порога)",
        "counter_cf_fee - плата за счетчик",
        "steps - ступенчатая тарификация"
      ]
    }
  ]
}








