# Анализ категорий SQL отчетов в KB

## Текущее состояние

### Категории в KB (из sql_examples.json)

| Категория | Примеров | Описание |
|-----------|----------|----------|
| **Доходы** | 28 | Запросы по доходам из счетов-фактур |
| **Расходы** | 14 | Запросы по расходам (трафик, затраты Иридиум) |
| **Клиенты** | 12 | Запросы по клиентам, их данным, сервисам |
| **Себестоимость** | 12 | Запросы по расчету себестоимости, прибыльности |
| **Превышение трафика** | 11 | Запросы по превышению трафика |
| **Трафик** | 10 | Запросы по трафику (общий, по зонам) |
| **Финансовые алерты** | 9 | Выявление проблем (убытки, низкая маржа) |
| **Аналитика** | 8 | Аналитические запросы, статистика |
| **CRM** | 3 | Запросы по CRM данным (email, клиенты) |
| **Поиск** | 2 | Поиск сервисов, клиентов по различным критериям |
| **Fees** | 2 | Запросы по сборам (активация, авансы) |
| **Планы** | 2 | Запросы по тарифным планам |
| **Сервисы** | 1 | Запросы по сервисам Iridium |
| **Отчеты** | 1 | Общие отчеты |
| **Экспорт** | 1 | Экспорт данных |
| **Валюты** | 1 | Запросы по валютам, курсам |
| **Справочники** | 1 | Запросы по справочникам |

**Всего: 17 категорий, 119 примеров**

### Категории в интерфейсе KB Библиотекаря

Текущий список (17 категорий):
1. Общие
2. Клиенты
3. Доходы
4. Расходы
5. Трафик
6. Превышение трафика
7. Себестоимость
8. Финансовые алерты
9. Аналитика
10. Отчеты
11. Экспорт
12. Fees
13. Планы
14. Валюты
15. Справочники
16. CRM
17. Тарифы

## Проблемы и предложения

### 1. Несоответствие категорий

**В KB есть, но нет в интерфейсе:**
- "Сервисы" (1 пример) - можно объединить с "Клиенты" или оставить отдельно
- "Поиск" (2 примера) - можно объединить с "Клиенты" или "Сервисы"

**В интерфейсе есть, но нет в KB:**
- "Общие" - дефолтная категория, нужна для новых запросов
- "Тарифы" - добавлена для будущих запросов по тарифам

### 2. Предложения по структуре категорий

#### Вариант A: Текущая структура (17 категорий)
**Плюсы:**
- Уже используется в KB
- Покрывает все основные области

**Минусы:**
- "Сервисы" и "Поиск" имеют мало примеров
- "Общие" может быть слишком широкой

#### Вариант B: Объединение мелких категорий (14-15 категорий)
**Предложения:**
- Объединить "Сервисы" и "Поиск" в "Клиенты" (так как поиск обычно по клиентам/сервисам)
- Оставить "Общие" для запросов, которые не вписываются в другие категории
- Добавить "Тарифы" для запросов по тарифным элементам

**Структура:**
1. Общие
2. Клиенты (включая сервисы и поиск)
3. Доходы
4. Расходы
5. Трафик
6. Превышение трафика
7. Себестоимость
8. Финансовые алерты
9. Аналитика
10. Отчеты
11. Экспорт
12. Fees
13. Планы
14. Тарифы
15. Валюты
16. Справочники
17. CRM

#### Вариант C: Расширенная структура (20+ категорий)
**Добавить:**
- "Контракты" - отдельно от клиентов
- "Договоры" - отдельно от клиентов
- "Периоды" - запросы по периодам
- "Устройства/IMEI" - отдельно от сервисов
- "Биллинг" - общие запросы по биллингу

**Структура:**
1. Общие
2. Клиенты
3. Контракты
4. Договоры
5. Сервисы
6. Устройства/IMEI
7. Доходы
8. Расходы
9. Трафик
10. Превышение трафика
11. Себестоимость
12. Финансовые алерты
13. Аналитика
14. Отчеты
15. Экспорт
16. Fees
17. Планы
18. Тарифы
19. Валюты
20. Справочники
21. CRM
22. Биллинг

## Рекомендации

### Краткосрочное решение (сейчас)
1. **Синхронизировать категории** между KB и интерфейсом
2. Добавить недостающие: "Сервисы", "Поиск"
3. Оставить "Общие" и "Тарифы" для будущего использования

**Итого: 19 категорий**

### Долгосрочное решение (после обсуждения)
1. Обсудить необходимость разделения "Клиенты" на подкатегории
2. Решить, нужны ли отдельные категории для "Контракты", "Договоры"
3. Определить, стоит ли объединять мелкие категории

## Вопросы для обсуждения

1. **Нужна ли категория "Общие"?**
   - Плюсы: для запросов, которые не вписываются в другие категории
   - Минусы: может стать "мусорной" категорией

2. **Объединять ли "Сервисы" и "Поиск" с "Клиенты"?**
   - Плюсы: меньше категорий, проще навигация
   - Минусы: потеря детализации

3. **Нужна ли отдельная категория "Тарифы"?**
   - Плюсы: для запросов по тарифным элементам, ценам
   - Минусы: может пересекаться с "Планы"

4. **Нужны ли подкатегории?**
   - Например: "Клиенты" → "Поиск клиентов", "Данные клиентов", "Сервисы клиентов"
   - Или оставить плоскую структуру?

5. **Как обрабатывать запросы, которые относятся к нескольким категориям?**
   - Выбирать основную категорию?
   - Добавить поле "дополнительные категории"?






