{
  "table_name": "BM_PERIODS",
  "schema": "billing",
  "description": "Справочник финансовых периодов биллинга. Содержит информацию о периодах (PERIOD_ID) с датами начала и окончания. Используется во всех финансовых таблицах (BM_INVOICE, BM_INVOICE_ITEM, ANALYTICS) для определения периода начисления. ВАЖНО: Периоды для Иридиум отличаются от стандартных - с 2 числа по 1 число следующего месяца (например, с 2 октября по 1 ноября).",
  "database": "Oracle (production)",
  "key_columns": {
    "PERIOD_ID": "Уникальный идентификатор финансового периода (PRIMARY KEY). Используется в BM_INVOICE.PERIOD_ID, BM_INVOICE_ITEM.PERIOD_ID, ANALYTICS.PERIOD_ID",
    "DATE_BEG": "Дата начала периода",
    "DATE_END": "Дата окончания периода",
    "PERIOD_NAME": "Название периода (если есть)",
    "PERIOD_TYPE": "Тип периода (если есть различие между STECCOM и Iridium)"
  },
  "business_rules": [
    "PERIOD_ID используется во всех финансовых таблицах для определения периода начисления",
    "Для STECCOM: стандартные календарные периоды (обычно с 1 по последнее число месяца)",
    "Для Иридиум: периоды с 2 числа по 1 число следующего месяца (например, с 2 октября по 1 ноября = период за октябрь)",
    "Период Иридиум определяется по формуле: DATE_BEG = 2-е число месяца, DATE_END = 1-е число следующего месяца",
    "При расчете себестоимости нужно учитывать соответствие периодов между доходами (BM_INVOICE_ITEM.PERIOD_ID) и затратами (STECCOM_EXPENSES по BILL_MONTH)",
    "BILL_MONTH в STECCOM_EXPENSES (формат YYYYMM) нужно сопоставлять с PERIOD_ID через даты"
  ],
  "relationships": [
    {
      "table": "BM_INVOICE",
      "type": "JOIN",
      "on": "BM_PERIODS.PERIOD_ID = BM_INVOICE.PERIOD_ID"
    },
    {
      "table": "BM_INVOICE_ITEM",
      "type": "JOIN",
      "on": "BM_PERIODS.PERIOD_ID = BM_INVOICE_ITEM.PERIOD_ID"
    },
    {
      "table": "ANALYTICS",
      "type": "JOIN",
      "on": "BM_PERIODS.PERIOD_ID = ANALYTICS.PERIOD_ID"
    }
  ],
  "usage_notes": [
    "Используется для определения периода начисления в финансовых таблицах",
    "ВАЖНО: Периоды Иридиум отличаются от стандартных - с 2 числа по 1 число следующего месяца",
    "При сопоставлении с STECCOM_EXPENSES.BILL_MONTH нужно учитывать разницу в определении периода",
    "Для расчета себестоимости за период нужно правильно сопоставить PERIOD_ID с BILL_MONTH"
  ],
  "note": "Таблица может находиться в другой схеме или иметь другое название. Структура описана на основе использования PERIOD_ID в других таблицах."
}






